# 供方信息表数据库设计

## 表名：supplier_info

### 字段设计说明

| 字段名 | 数据类型 | 长度 | 是否必填 | 默认值 | 说明 |
|--------|----------|------|----------|--------|------|
| **主键字段** |
| id | BIGINT | - | 是 | AUTO_INCREMENT | 主键ID |
| **基本信息** |
| supplier_code | VARCHAR | 50 | 是 | - | 供方编码，唯一 |
| supplier_name | VARCHAR | 200 | 是 | - | 供方名称 |
| level | ENUM | - | 是 | 'A' | 供方等级：A-优质，B-良好，C-一般 |
| category | ENUM | - | 是 | - | 分类：原料、配件、设备、外协、服务 |
| status | ENUM | - | 是 | 'active' | 供方状态：active-启用，suspended-暂停 |
| **联系信息** |
| contact | VARCHAR | 100 | 是 | - | 联系人 |
| phone | VARCHAR | 20 | 是 | - | 联系电话 |
| email | VARCHAR | 100 | 否 | - | 电子邮箱 |
| region | VARCHAR | 100 | 否 | - | 所在地区 |
| address | VARCHAR | 500 | 否 | - | 详细地址 |
| **业务信息** |
| purchase_amount | DECIMAL | 15,2 | 否 | 0.00 | 年度采购额 |
| last_cooperation_date | DATE | - | 否 | - | 最近合作日期 |
| remark | TEXT | - | 否 | - | 备注信息 |
| **银行信息** |
| tax_number | VARCHAR | 20 | 否 | - | 纳税人识别号 |
| bank_name | VARCHAR | 200 | 否 | - | 开户银行 |
| bank_account | VARCHAR | 30 | 否 | - | 银行账号 |
| bank_code | VARCHAR | 12 | 否 | - | 银行行号 |
| **系统字段** |
| created_at | TIMESTAMP | - | 否 | CURRENT_TIMESTAMP | 创建时间 |
| updated_at | TIMESTAMP | - | 否 | CURRENT_TIMESTAMP | 更新时间 |
| created_by | VARCHAR | 50 | 否 | - | 创建人 |
| updated_by | VARCHAR | 50 | 否 | - | 更新人 |
| is_deleted | TINYINT | 1 | 否 | 0 | 是否删除：0-未删除，1-已删除 |

### 索引设计

| 索引名 | 字段 | 类型 | 说明 |
|--------|------|------|------|
| idx_supplier_code | supplier_code | UNIQUE | 供方编码唯一索引 |
| idx_supplier_name | supplier_name | INDEX | 供方名称索引 |
| idx_category | category | INDEX | 分类索引 |
| idx_status | status | INDEX | 状态索引 |
| idx_level | level | INDEX | 等级索引 |
| idx_region | region | INDEX | 地区索引 |
| idx_created_at | created_at | INDEX | 创建时间索引 |
| idx_is_deleted | is_deleted | INDEX | 删除标记索引 |

### 字段约束和验证

#### 1. 必填字段验证
- supplier_code：供方编码，唯一，不能为空
- supplier_name：供方名称，不能为空
- level：供方等级，枚举值：A、B、C
- category：分类，枚举值：原料、配件、设备、外协、服务
- status：供方状态，枚举值：active、suspended
- contact：联系人，不能为空
- phone：联系电话，不能为空

#### 2. 格式验证
- phone：联系电话，格式：3-20位数字
- email：电子邮箱，标准邮箱格式
- tax_number：纳税人识别号，格式：15-20位数字和大写字母
- bank_account：银行账号，格式：16-19位数字
- bank_code：银行行号，格式：12位数字

#### 3. 业务规则
- supplier_code：供方编码必须唯一
- purchase_amount：年度采购额，非负数
- last_cooperation_date：最近合作日期，不能晚于当前日期
- is_deleted：软删除标记，0表示正常，1表示已删除

### 数据字典

#### 供方等级 (level)
- A：优质供方
- B：良好供方  
- C：一般供方

#### 分类 (category)
- 原料：原材料供应商
- 配件：配件供应商
- 设备：设备供应商
- 外协：外协加工商
- 服务：服务提供商

#### 供方状态 (status)
- active：启用状态
- suspended：暂停状态

### 示例数据

```sql
-- 华东材料有限公司
INSERT INTO supplier_info (
    supplier_code, supplier_name, level, category, status,
    contact, phone, email, region, address,
    purchase_amount, last_cooperation_date, remark,
    tax_number, bank_name, bank_account, bank_code,
    created_by
) VALUES (
    'SUP-001', '华东材料有限公司', 'A', '原料', 'active',
    '王强', '021-62345678', 'supplier@hdmaterials.com', '上海市', '浦东新区张江高科产业园',
    450000.00, '2024-02-15', '优质材料供应商，年度框架协议',
    '91310000123456789X', '中国工商银行上海分行', '6222021234567890123', '102290000001',
    'system'
);
```

### 查询优化建议

1. **常用查询字段建立索引**：供方编码、供方名称、分类、状态
2. **复合索引**：根据业务查询需求，可建立复合索引
3. **软删除查询**：所有业务查询都应加上 `is_deleted = 0` 条件
4. **分页查询**：大数据量时使用 LIMIT 进行分页

### 扩展建议

1. **审计日志**：可考虑添加审计日志表记录数据变更
2. **版本控制**：重要数据变更可考虑版本控制
3. **数据备份**：定期备份供方信息数据
4. **权限控制**：根据用户角色控制数据访问权限


啊啊